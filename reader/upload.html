<input type="file" onchange="previewFile()"><br>
<img src="" height="200" alt="Image preview...">
<pre id="result"></pre>
<script type="text/javascript" src="steganography.js"></script>
<script type="text/javascript">
function previewFile() {
  var preview = document.querySelector('img');
  var file    = document.querySelector('input[type=file]').files[0];
  var reader  = new FileReader();
	
	preview.onload = function(){
	if(!reader.result){ return false; }
		var msg = steganography.decode(reader.result);
		console.log(msg);
		document.getElementById("result").innerHTML = JSON.stringify(JSON.parse(msg), null, 2);
	}
  reader.onloadend = function () {
		preview.src = reader.result;
	
  }

  if (file) {
    reader.readAsDataURL(file);
  } else {
    preview.src = "";
  }
}
</script>